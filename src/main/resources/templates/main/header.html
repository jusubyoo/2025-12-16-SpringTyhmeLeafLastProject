
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="/">SFR</a></h1>
							</div>
							

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li class="current"><a href="/">Home</a></li>
									<li><a href="/member/join">회원가입</a></li>
									<li>
										<a href="#">맛집</a>
										<ul>
											<li><a href="/food/list">맛집 목록</a></li>
											<li><a href="/food/search">맛집 검색</a></li>
		
											<li><a href="/food/reserve">맛집 예약</a></li>
										</ul>
									</li>
									<li>
										<a href="#">레시피</a>
										<ul>
											<li><a href="/recipe/list">레시피 목록</a></li>
											<li><a href="/recipe/search">레시피 검색</a></li>
											<li><a href="/recipe/recommand">레시피 추천</a></li>
										</ul>
									</li>
									<li>
										<a href="#">서울 여행</a>
										<ul>
											<li><a href="/seoul/location">명소</a></li>
											<li><a href="/seoul/nature">자연&관광</a></li>
		
											<li><a href="/seoul/shop">쇼핑</a></li>
											<li><a href="/seoul/youtube">동영상</a></li>
										</ul>
									</li>
									<li>
										<a href="#">부산 여행</a>
										<ul>
											<li><a href="/food/list">명소</a></li>
											<li><a href="/food/search">자연&관광</a></li>
		
											<li><a href="/food/reserve">축제</a></li>
											<li><a href="/food/reserve">동영상</a></li>
										</ul>
									</li>
									<li><a href="/board/list">커뮤니티</a></li>
								</ul>
							</nav>
                            <div class="text-right" style="margin-top: 30px" th:if="${session.id==null}">
							
							 ID:<input type=text ref=id class="input-sm" size=15 v-model="id" @keyup.enter="login()">
							 &nbsp;
							 PW:<input type="password" ref=pwd class="input-sm" size=15 v-model="pwd" @keyup.enter="login()">
							 &nbsp;
							 <button type=button class="btn-primary btn-sm" @click="login()">로그인</button>
                           					    
							</div>
							<div class="text-right" style="margin-top: 30px" th:if="${session.id!=null}">
							  
							  [[${session.name}]]님 로그인되었습니다
							  <button type=button class="btn-primary btn-sm" @click="logout()">로그아웃</button>
                            							    
							</div>
					</header>
					
				</div>

			<script>
			 const logApp=Vue.createApp({
				 data(){
					 return {
						 id:'',
						 pwd:'',
						 vo:{}
					 }
				 },
				 methods:{
					 // 로그인 
					 login(){
						 // const id=ref("") => useState()
						 if(this.id==="")
						 {
							 this.$refs.id.focus()
							 return
						 }
						 if(this.pwd==="")
						 {
							 this.$refs.pwd.focus()
							 return
						 }
						 axios.get('http://localhost/member/login_vue/',{
							params:
								{
								 id:this.id,
								 pwd:this.pwd
								}
							 
						 }).then(response=>{
							 console.log(response.data)
							 this.vo=response.data
							 if(response.data.msg==='OK')
							 {
								 location.href="/"
							 }
							 else if(response.data.msg==='NOID')
							 {
								 alert("아이디 존재하지 않습니다")
								 this.id=""
								 this.pwd=""
								 this.$refs.id.focus()
							 }
							 else if(response.data.msg==='NOPWD')
							 {
								 alert("비밀번호가 틀립니다!!")
								 this.pwd=""
								 this.$refs.pwd.focus()
							 }
						 })
					 },
					 // 로그아웃
					 logout(){
						 axios.get('http://localhost/member/logout_vue/')
						 .then(response=>{
							 if(response.data==='yes')
							 {
								 location.href="/"
							 }
						 })
					 }
				 }
				 
			 })
			 logApp.config.compilerOptions.delimiters=['((','))']
             logApp.mount("#header-wrapper")
			</script>

</body>
</html>
